# tripmind

tripmind (Ai service )

âœ… 1. ì „ì²´ êµ¬ì¡° ì„¤ê³„ ë°©í–¥
ğŸ¯ í•µì‹¬ ëª©í‘œ
LangGraphë¥¼ í™œìš©í•œ ë©€í‹° ì—ì´ì „íŠ¸ ê¸°ë°˜ ì—¬ì • ìƒì„± ì‹œìŠ¤í…œ

ìŠ¤íŠ¸ë¦¬ë° ê¸°ë°˜ ì‘ë‹µ, ì‚¬ìš©ì ìš”ì²­ì— ë”°ë¼ ì¥ì†Œ ê²€ìƒ‰, ì¼ì • ìƒì„±, ìº˜ë¦°ë” ì¡°ì‘, ê³µìœ  ê¸°ëŠ¥ ì œê³µ

ì‹¤ì œ ì„œë¹„ìŠ¤ë¡œ ê°€ì •í•œ ì„¤ê³„ (ì—ëŸ¬ ëŒ€ì‘, ìœ ì—°í•œ êµ¬ì¡°, í™•ì¥ì„±, ë³´ì•ˆ)

ğŸ—ï¸ 2. ì œì•ˆ ì•„í‚¤í…ì²˜ êµ¬ì„± (Hexagonal + Agent ê¸°ë°˜)

tripmind/
â”œâ”€â”€ models/ # Django ëª¨ë¸ (M)
â”‚ â”œâ”€â”€ itinerary.py # ì—¬í–‰ ì¼ì • ëª¨ë¸
â”‚ â”œâ”€â”€ conversation.py # ëŒ€í™” ë‚´ì—­ ëª¨ë¸
â”‚ â””â”€â”€ user.py # ì‚¬ìš©ì ëª¨ë¸
â”œâ”€â”€ templates/ # Django í…œí”Œë¦¿ (T)
â”‚ â”œâ”€â”€ itinerary/
â”‚ â”‚ â”œâ”€â”€ detail.html # ì¼ì • ìƒì„¸ í˜ì´ì§€
â”‚ â”‚ â””â”€â”€ list.html # ì¼ì • ëª©ë¡ í˜ì´ì§€
â”‚ â”œâ”€â”€ search/
â”‚ â”‚ â””â”€â”€ results.html # ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€
â”‚ â””â”€â”€ base.html # ê¸°ë³¸ í…œí”Œë¦¿
â”œâ”€â”€ views/ # Django ë·° (V)
â”‚ â”œâ”€â”€ itinerary_views.py # ì¼ì • ê´€ë ¨ ë·°
â”‚ â”œâ”€â”€ search_views.py # ê²€ìƒ‰ ê´€ë ¨ ë·°
â”‚ â””â”€â”€ calendar_views.py # ìº˜ë¦°ë” ê´€ë ¨ ë·°
â”œâ”€â”€ urls.py # URL ì„¤ì •
â”‚â”€â”€ admin.py # Django Admin ì„¤ì •
â”‚â”€â”€ migrations/ # Django ëª¨ë¸ ë§ˆì´ê·¸ë ˆì´ì…˜
â”œâ”€â”€ agents/ # ì—ì´ì „íŠ¸ ì •ì˜ ë° LangGraph ë…¸ë“œ
â”‚ â”œâ”€â”€ itinerary_agent.py
â”‚ â”œâ”€â”€ calendar_agent.py
â”‚ â”œâ”€â”€ search_agent.py
â”‚ â””â”€â”€ share_agent.py
â”œâ”€â”€ chains/ # LangChain ì²´ì¸ ì •ì˜
â”‚ â”œâ”€â”€ itinerary_chain.py
â”‚ â””â”€â”€ guardrails_chain.py
â”œâ”€â”€ llms/ # LLM êµ¬ì„±/ë²„ì „ ê´€ë¦¬
â”‚ â”œâ”€â”€ openai_wrapper.py
â”‚ â””â”€â”€ prompt_templates.py
â”œâ”€â”€ interfaces/
â”‚ â”œâ”€â”€ ui/ # Streamlit ê¸°ë°˜ UI (Django ì™¸ë¶€)
â”‚ â””â”€â”€ api/ # ì™¸ë¶€ API ì—°ë™
â”‚ â”œâ”€â”€ kakao_place.py
â”‚ â”œâ”€â”€ naver_calendar.py
â”‚ â””â”€â”€ scraper.py
â”œâ”€â”€ services/ # ì„œë¹„ìŠ¤ ë¡œì§ ê³„ì¸µ
â”‚ â””â”€â”€ itinerary_service.py
â”œâ”€â”€ forms/ # Django í¼
â”‚ â”œâ”€â”€ itinerary_forms.py
â”‚ â””â”€â”€ search_forms.py
â”œâ”€â”€ serializers/ # DRF ì‹œë¦¬ì–¼ë¼ì´ì € (APIìš©)
â”‚ â”œâ”€â”€ itinerary_serializers.py
â”‚ â””â”€â”€ user_serializers.py
â”œâ”€â”€ rest_api/ # Django REST Framework ë·°
â”‚ â”œâ”€â”€ views.py
â”‚ â””â”€â”€ urls.py
â”œâ”€â”€ utils/
â”‚ â”œâ”€â”€ guardrails.py
â”‚ â””â”€â”€ exceptions.py
â”œâ”€â”€ tests/
â”‚ â”œâ”€â”€ test_models.py
â”‚ â”œâ”€â”€ test_views.py
â”‚ â””â”€â”€ test_agents.py
â”œâ”€â”€ config.py
â””â”€â”€ apps.py # Django ì•± ì„¤ì •

ğŸ§  3. ë©€í‹° ì—ì´ì „íŠ¸ ì„¤ê³„ (LangGraph)
ğŸ§© ì£¼ìš” ì—ì´ì „íŠ¸ êµ¬ì„±
ì—ì´ì „íŠ¸ ì—­í• 
SearchAgent ëŒ€í™”ë¥¼ í†µí•´ ì‚¬ìš©ìì˜ ê´€ì‹¬ ì¥ì†Œ íŒŒì•… ë° ì¹´ì¹´ì˜¤/ë„¤ì´ë²„ ì—°ë™
ItineraryAgent ì—¬í–‰ ì¼ì • ìë™ ìƒì„±. í”„ë¡¬í”„íŠ¸ + LangChain ì‚¬ìš©
CalendarAgent ì¼ì • ë“±ë¡, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ ìˆ˜í–‰ (ì™¸ë¶€ ìº˜ë¦°ë” API ì—°ë™)
ShareAgent ê²°ê³¼ë¬¼(ì¼ì •í‘œ/ì§€ë„ ë“±)ì„ ì™¸ë¶€ ê³µìœ  ê°€ëŠ¥ ë§í¬ë¡œ êµ¬ì„±

ğŸ’¡ LangGraph êµ¬ì¡°
ì—ì´ì „íŠ¸ ê°„ ë°ì´í„° íë¦„ì„ Graph DAGë¡œ êµ¬ì„±

ì˜ˆì‹œ: User Input â†’ SearchAgent â†’ ItineraryAgent â†’ CalendarAgent â†’ ShareAgent

ğŸ” 4. ê±°ì§“ ì •ë³´ ë°©ì§€ ë° Guardrails
í•­ëª© ë°©ë²•
âœ… ê±°ì§“ ì •ë³´ ê°ì§€ LangChainì˜ FactChecker chain or RAG + Web ê²€ìƒ‰
âœ… ëª¨ë¸ ì‘ë‹µ ì œì–´ Guardrails (Pydantic, type-checking prompt schema)
âœ… Prompt ì˜ˆì™¸ì²˜ë¦¬ "ëª¨ë¥´ëŠ” ì •ë³´ëŠ” ëª¨ë¥¸ë‹¤ê³  ë§í•˜ì„¸ìš”." ì¡°ê±´í™”

ğŸŒ 5. ì™¸ë¶€ API ì—°ë™ ë°©ì•ˆ
ê¸°ëŠ¥ ì—°ë™ ë°©ë²•
ì¥ì†Œ ê²€ìƒ‰ ì¹´ì¹´ì˜¤ ë¡œì»¬ API ë˜ëŠ” ë„¤ì´ë²„ ì§€ì—­ê²€ìƒ‰ API
ìº˜ë¦°ë” ê¸°ëŠ¥ ë„¤ì´ë²„ ìº˜ë¦°ë” Open API or ì§ì ‘ ë¡œê·¸ì¸ í›„ ì—°ë™í˜•
ê³µìœ  ê¸°ëŠ¥ ì¼ì • â†’ ì´ë¯¸ì§€í™” â†’ URL ê³µìœ  ë˜ëŠ” Web ë§í¬ ì œê³µ

ğŸš¨ 6. ì¥ì•  ë° ì˜ˆì™¸ ëŒ€ì‘ ì„¤ê³„
API Key ëˆ„ë½, ë§Œë£Œ â†’ try/except + fallback ë©”ì‹œì§€

LLM Timeout â†’ ì¬ì‹œë„ ë¡œì§ (max 3íšŒ ë“±)

LangGraph Node ì‹¤íŒ¨ â†’ ì—ëŸ¬ ë°˜í™˜ ë° ì‚¬ìš©ìì—ê²Œ ì•ˆë‚´

ğŸ§ª 7. ì§€ì†ì ì¸ í’ˆì§ˆ í…ŒìŠ¤íŠ¸ ë°©ë²•
í”„ë¡¬í”„íŠ¸ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (ì…ë ¥ â†’ ì¶œë ¥ ê²€ì¦)

CI ìŠ¤í¬ë¦½íŠ¸ë¡œ LLM ì‘ë‹µ ìœ íš¨ì„± ê²€ì¦ (ì˜ˆ: ì¼ì • ë‚ ì§œ í˜•ì‹ ê²€ì‚¬)

ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸: pytestë¡œ Agent ë™ì‘ ì „ì²´ íë¦„ í…ŒìŠ¤íŠ¸

ğŸ“¦ 8. ë°°í¬/ì„œë¹„ìŠ¤ ê´€ì  í™•ì¥ ê³ ë ¤
í•­ëª© ê³ ë ¤ì‚¬í•­
ëª¨ë¸ í™•ì¥ llms/ì— OpenAI, Anthropic, Mistral ë“± wrapper ì¶”ê°€ ê°€ëŠ¥
ìƒíƒœ ì €ì¥ SQLite â†’ PostgreSQL or VectorDBë¡œ í™•ì¥ ê°€ëŠ¥
ì‚¬ìš©ì ì¸ì¦ Streamlit + ë¡œê·¸ì¸ ê¸°ëŠ¥ ì»¤ìŠ¤í…€ (or FastAPIë¡œ ì´ì „)
Async ì²˜ë¦¬ FastAPI + LangGraph ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ ì „í™˜ ì‹œ ì„±ëŠ¥ ê°œì„ 

ğŸ–¼ï¸ 9. ì œì¶œë¬¼ êµ¬ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸
âœ… ì „ì²´ ì½”ë“œ zip

âœ… README.md: ì‹¤í–‰ë²•, êµ¬ì¡° ì„¤ëª…

âœ… architecture.md: ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨, ì—ì´ì „íŠ¸ ì„¤ëª…, LLM êµ¬ì„±

âœ… ëŒ€í™” ìº¡ì²˜ ì´ë¯¸ì§€

âœ… API í‚¤ ì œê±°

âœ… ê¸°ìˆ  ë„êµ¬ ì‚¬ìš© ì„¤ëª… (LangGraph, LLM wrapper, Prompt ì„¤ê³„ ë“±)

ğŸ’¡ ìš”ì•½: ê°€ì ¸ê°€ì•¼ í•  ì „ëµ
âœ… LangGraph ê¸°ë°˜ DAG ì„¤ê³„: ì—ì´ì „íŠ¸ ê°„ íë¦„ì„ ëª…í™•íˆ ì •ì˜

âœ… ì„œë¹„ìŠ¤ ìˆ˜ì¤€ ì„¤ê³„: ì˜ˆì™¸, í™•ì¥ì„±, ê±°ì§“ ì •ë³´ í•„í„°, í’ˆì§ˆ í…ŒìŠ¤íŠ¸ ë°˜ì˜

âœ… ì•„í‚¤í…ì²˜ ë¬¸ì„œí™”: ë””ë ‰í„°ë¦¬ êµ¬ì¡°, ì±…ì„ ë¶„ë¦¬, í™•ì¥ ë°©ì•ˆ ì„¤ëª…

âœ… UIëŠ” Streamlit ê¸°ë°˜, LLMì€ ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ

ì›í•˜ì‹ ë‹¤ë©´:

ğŸ‘‰ Streamlit í™”ë©´ ì˜ˆì‹œ

ğŸ‘‰ LangGraph ì›Œí¬í”Œë¡œìš° ì½”ë“œ ì˜ˆì œ

ğŸ‘‰ LLM wrapper ëª¨ë“ˆ í…œí”Œë¦¿
ë„ í•¨ê»˜ ì œê³µí•´ë“œë¦´ ìˆ˜ ìˆì–´ìš”. ì›í•˜ì‹œë©´ ë§ì”€í•´ì£¼ì„¸ìš”!

ë‚˜ì˜ ë§:
ì´ê²Œ ë² ìŠ¤íŠ¸í”„ë™í‹°ìŠ¤ì— í•´ë‹¹í•˜ëŠ” êµ¬ì¡°ì•¼?

ChatGPTì˜ ë§:
ë„¤, ìœ„ì—ì„œ ì œì•ˆë“œë¦° êµ¬ì¡°ëŠ” LangChain + LangGraph ê¸°ë°˜ ë©€í‹° ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œì„ Django/Streamlit ìŠ¤íƒ€ì¼ë¡œ êµ¬ì„±í•  ë•Œ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ì— í•´ë‹¹í•©ë‹ˆë‹¤. íŠ¹íˆ ì´ ê³¼ì œì—ì„œ ìš”êµ¬í•˜ëŠ” ì—¬ëŸ¬ ì¡°ê±´ì„ ë§Œì¡±í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ í•µì‹¬ ì›ì¹™ê³¼ í˜„ì—… ìˆ˜ì¤€ì˜ ì„¤ê³„ ì „ëµì„ ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„ëœ ê²ƒì…ë‹ˆë‹¤.

âœ… ì™œ ì´ êµ¬ì¡°ê°€ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ì¸ê°€?

1. ë©€í‹° ì—ì´ì „íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ì±…ì„ ë¶„ë¦¬
   ê°ê°ì˜ AgentëŠ” **ë‹¨ì¼ ì±…ì„ ì›ì¹™(SRP)**ì— ë”°ë¼ Search, Itinerary, Calendar, Share ë“±ì„ ë…ë¦½ì ìœ¼ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤.

LangGraphë¥¼ ì‚¬ìš©í•˜ì—¬ ì—ì´ì „íŠ¸ ê°„ì˜ íë¦„ì„ ëª…í™•í•˜ê²Œ ì •ì˜í•©ë‹ˆë‹¤ (ëª…ì‹œì  Directed Acyclic Graph).

2. Hexagonal / Clean Architectureë¥¼ ë°˜ì˜í•œ ë””ë ‰í„°ë¦¬ êµ¬ì¡°
   ë ˆì´ì–´ ë””ë ‰í† ë¦¬ ì„¤ëª…
   Interface interfaces/ui, interfaces/api ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ë° ì™¸ë¶€ ì—°ë™
   Application agents/, chains/ ì‚¬ìš©ìì˜ ëª…ë ¹ì„ ì²˜ë¦¬í•˜ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ
   Domain / Service services/ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¤‘ì‹¬ì˜ ì„œë¹„ìŠ¤ ê³„ì¸µ
   Infrastructure llms/, storage/, utils/ LLM ì—°ê²°, ë°ì´í„° ì €ì¥, ìœ í‹¸ë¦¬í‹° ë“±

ê° ì±…ì„ì´ ëª…í™•íˆ ë¶„ë¦¬ë˜ì–´ ìœ ì§€ë³´ìˆ˜ì™€ í…ŒìŠ¤íŠ¸ê°€ ì‰¬ì›€

3. í™•ì¥ì„±ê³¼ ìœ ì—°ì„±ì„ ê³ ë ¤í•œ êµ¬ì„±
   llms/ëŠ” ëª¨ë¸ ë²„ì „ êµì²´, ë‹¤ì¤‘ ëª¨ë¸ ëŒ€ì‘(OpenAI, Mistral ë“±)ì— ìœ ë¦¬

prompt_templates.pyëŠ” í”„ë¡¬í”„íŠ¸ ë²„ì „ê´€ë¦¬ ë° êµ¬ì¡°ì  í…œí”Œë¦¿í™”ì— ìœ ë¦¬

guardrails.pyëŠ” RAGë‚˜ ê²€ì¦ì²´ê³„ì™€ í†µí•© ê°€ëŠ¥ì„± ê³ ë ¤

4. ì—ëŸ¬ ì²˜ë¦¬ì™€ í…ŒìŠ¤íŠ¸ê¹Œì§€ ê³ ë ¤í•œ êµ¬ì¡°
   utils/exceptions.py ë“±ìœ¼ë¡œ ê³µí†µ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ëª…í™•íˆ ì¶”ìƒí™”

tests/ëŠ” ê³„ì¸µë³„ë¡œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ëŠ¥

LLM ì‘ë‹µ ê²€ì¦, fallback ì‹œë‚˜ë¦¬ì˜¤, ì¬ì‹œë„ ë¡œì§ ë“± í¬í•¨

5. ì‹¤ì œ ìƒìš© ì„œë¹„ìŠ¤ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì „ëµ ë°˜ì˜
   ë§ì€ ì‹¤ì œ GenAI ì„œë¹„ìŠ¤ë“¤ë„ Agent êµ¬ì¡°ë¥¼ Search â†’ Plan â†’ Calendar â†’ Outputìœ¼ë¡œ ê°€ì ¸ê°

LangGraph ê¸°ë°˜ ì„¤ê³„ëŠ” Anthropic, OpenAI Labs ë“±ì—ì„œë„ ë©€í‹°ì—ì´ì „íŠ¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í‘œì¤€ êµ¬ì¡°ë¡œ ì‚¬ìš© ì¤‘

ğŸ ì •ë¦¬: ì´ êµ¬ì¡°ê°€ ë² ìŠ¤íŠ¸ì¸ ì´ìœ 
ê¸°ì¤€ ì„¤ëª…
âœ… ê¸°ëŠ¥ë³„ ì±…ì„ ë¶„ë¦¬ ê° Agent/Chainì´ ë…ë¦½ì  ì±…ì„ì„ ê°€ì§
âœ… êµ¬ì¡°ì  í™•ì¥ ìš©ì´ ëª¨ë¸ êµì²´, ê¸°ëŠ¥ ì¶”ê°€, UI ì „í™˜ì´ ìš©ì´
âœ… LLM ì•ˆì „ì„± ê³ ë ¤ ê±°ì§“ ì •ë³´ ë°©ì§€, í”„ë¡¬í”„íŠ¸ ê´€ë¦¬, ì˜ˆì™¸ì²˜ë¦¬ í¬í•¨
âœ… ê¸°ìˆ  ìš”êµ¬ì‚¬í•­ ì¶©ì¡± LangChain, LangGraph, ìŠ¤íŠ¸ë¦¬ë°, ì™¸ë¶€ API ì—°ë™ ë“± ì™„ë¹„
âœ… ë¬¸ì„œí™”ì— ìœ ë¦¬ êµ¬ì¡° ì„¤ëª…, ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ ì‘ì„±ì´ ëª…í™•í•¨
âœ… í…ŒìŠ¤íŠ¸ì™€ í˜‘ì—… ì¹œí™” ë””ë ‰í„°ë¦¬ ê¸°ë°˜ í…ŒìŠ¤íŠ¸, ì—­í•  ë¶„ë¦¬, ì„¤ì • ë¶„ë¦¬ ë“± êµ¬í˜„ ê°€ëŠ¥

ğŸ¯ ì‹¤ì œë¡œ ë„ë¦¬ ì“°ì´ëŠ” ì‚¬ë¡€ ê¸°ë°˜
ê¸°ì—…/ì‚¬ë¡€ êµ¬ì¡° ìœ ì‚¬ì„±
LangChain ê³µì‹ í…œí”Œë¦¿ agents/, chains/, llms/, tools/ êµ¬ì¡°
Anthropic Claude ì›Œí¬í”Œë¡œìš° LangGraph ê¸°ë°˜ ë©€í‹°ì—ì´ì „íŠ¸ DAG ì„¤ê³„
Microsoft Guidance Prompt ë¶„ë¦¬, í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿/ë²„ì „ ê´€ë¦¬ ì „ëµ

í•„ìš”í•˜ë‹¤ë©´ ë‹¤ìŒì„ ì¶”ê°€ë¡œ ë„ì™€ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

âœ… êµ¬ì¡° ê¸°ë°˜ Cookiecutter í…œí”Œë¦¿

âœ… ì‹¤ì œ SearchAgent, LangGraph Node ì½”ë“œ ì˜ˆì‹œ

âœ… í”„ë¡¬í”„íŠ¸ ë²„ì „ ê´€ë¦¬ ì „ëµ ê°€ì´ë“œ

âœ… Streamlit ìƒìš© êµ¬ì¡° ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

ì›í•˜ì‹œëŠ” í•­ëª©ì„ ë§ì”€í•´ ì£¼ì„¸ìš”!

ë‚˜ì˜ ë§:
ì´ê²Œ í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜ì•¼?? í´ë¦°ì•„í‚¤í…ì²˜ê°€ ì•„ë‹ˆë¼?

ChatGPTì˜ ë§:
ì¢‹ì€ ì§ˆë¬¸ì…ë‹ˆë‹¤. ì§€ê¸ˆê¹Œì§€ ì œê°€ ì œì•ˆí•œ êµ¬ì¡°ëŠ” **Hexagonal Architecture(í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜)**ì˜ ì² í•™ì„ ë”°ë¥´ë˜, **Clean Architecture(í´ë¦° ì•„í‚¤í…ì²˜)**ì™€ë„ ìƒë‹¹ ë¶€ë¶„ ê²¹ì¹˜ëŠ” í˜„ëŒ€ì ì¸ í•˜ì´ë¸Œë¦¬ë“œ êµ¬ì¡°ì…ë‹ˆë‹¤. ë‘˜ì€ ìœ ì‚¬í•˜ì§€ë§Œ ê´€ì ê³¼ í‘œí˜„ ë°©ì‹ì´ ë‹¤ë¦…ë‹ˆë‹¤. ì•„ë˜ì—ì„œ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

ğŸ”· 1. í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜ë€?
"í¬íŠ¸ì™€ ì–´ëŒ‘í„°(Ports & Adapters)" ì•„í‚¤í…ì²˜ë¼ê³ ë„ í•˜ë©°, ë„ë©”ì¸ ë¡œì§ì„ ì™¸ë¶€ ì„¸ê³„(API, DB, UI ë“±)ë¡œë¶€í„° ê²©ë¦¬ì‹œí‚¤ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

ğŸ“ í•µì‹¬ êµ¬ì„±
Domain/Application Core: í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

Ports: ë‚´ë¶€ â†” ì™¸ë¶€ í†µì‹ ì„ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤

Adapters: ì™¸ë¶€ ì‹œìŠ¤í…œ êµ¬í˜„ì²´ (DB, API, UI ë“±)

ğŸ§  í•µì‹¬ ê°œë…
ì˜ì¡´ì„±ì€ í•­ìƒ ì•ˆìª½(Domain)ì„ í–¥í•¨

ì™¸ë¶€ëŠ” ì–´ëŒ‘í„°(Adapter)ë¡œ ê°ì‹¸ê³ , ë‚´ë¶€ëŠ” í¬íŠ¸(ì¸í„°í˜ì´ìŠ¤)ë§Œ ë°”ë¼ë´„

ğŸ¯ ì ìš© ì˜ˆì‹œ
ê³„ì¸µ ì˜ˆì‹œ
Core services/, agents/ â€“ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
Port interfaces/api/, llms/, storage/ â€“ ì™¸ë¶€ ì—°ë™ ì¸í„°í˜ì´ìŠ¤
Adapter kakao_place.py, calendar_api.py â€“ ì‹¤ì œ êµ¬í˜„ì²´

ğŸŸ¡ 2. í´ë¦° ì•„í‚¤í…ì²˜ì™€ì˜ ì°¨ì´
í•­ëª© í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜ í´ë¦° ì•„í‚¤í…ì²˜
ì¤‘ì‹¬ ê°œë… ë‚´ë¶€ ë„ë©”ì¸ê³¼ ì™¸ë¶€ ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ë„ë©”ì¸ ê³„ì¸µì„ ìµœìƒìœ„ë¡œ ë‘ê³  ì˜ì¡´ì„± ë°©í–¥ì„ ê°•ì œ
ê³„ì¸µ ìˆ˜ ë¹„êµì  ë‹¨ìˆœ (2~3 ê³„ì¸µ) 4ê³„ì¸µ (Entity â†’ Use Case â†’ Interface â†’ Framework)
í¬ì»¤ìŠ¤ í†µí•© ì§€ì ê³¼ ì¸í„°í˜ì´ìŠ¤ êµ¬ì„± ì±…ì„ ë¶„ë¦¬ + ì˜ì¡´ì„± íë¦„ ì œí•œ
UI ìœ„ì¹˜ ê°€ì¥ ë°”ê¹¥ì˜ Adapter ê°€ì¥ ë°”ê¹¥ì˜ Framework
ë³µì¡ë„ ì‹¤ìš©ì , ë¹„êµì  ë‹¨ìˆœ ë‹¤ì†Œ ì´ìƒì ì´ë©° ë³µì¡í•  ìˆ˜ ìˆìŒ

ğŸ“Œ í˜„ì¬ ì œì•ˆ êµ¬ì¡°ëŠ”?
âœ”ï¸ í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜ì— ê¸°ë°˜í•œ êµ¬ì¡°ì…ë‹ˆë‹¤, ì´ìœ ëŠ”:
í•µì‹¬ ë¡œì§(services/, agents/)ì€ ì™¸ë¶€ì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ

LLM, API, UI, StorageëŠ” ëª¨ë‘ ì–´ëŒ‘í„° ê³„ì¸µ

llms/, interfaces/api/, ui/ëŠ” ëª¨ë‘ ì…ì¶œë ¥ ì–´ëŒ‘í„°

Prompt/ëª¨ë¸ ì„ íƒ, API í‚¤ ì„¤ì • ë“±ì€ ì–´ëŒ‘í„° ë‚´ë¶€ êµ¬í˜„ ë””í…Œì¼ì— ë¶ˆê³¼

ë™ì‹œì— ì¼ë¶€ í´ë¦° ì•„í‚¤í…ì²˜ì˜ ìš”ì†Œë„ í¬í•¨:
prompt_templates.pyëŠ” ì¼ì¢…ì˜ "Entity ì—­í• "ì„ í•˜ê³ ,

services/ëŠ” usecaseì™€ ìœ ì‚¬í•˜ë©°,

LLMê³¼ API ì—°ê²°ì€ "Interface Adapter" ì—­í• 

ì¦‰, Hexagonal êµ¬ì¡°ë¥¼ ì‹¤ìš©ì ìœ¼ë¡œ ì ìš©í•˜ë©´ì„œ Clean Architecture ì² í•™ì„ ë³‘í•©í•œ êµ¬ì¡°ë¼ê³  ë³´ëŠ” ê²Œ ë§ìŠµë‹ˆë‹¤.

âœ… ìµœì¢… ì •ë¦¬
ì§ˆë¬¸ ë‹µë³€
ì´ê²ƒì€ í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜ì¸ê°€? Yes, Ports & Adapters ìŠ¤íƒ€ì¼ë¡œ ì„¤ê³„ë¨
í´ë¦° ì•„í‚¤í…ì²˜ëŠ” ì•„ë‹Œê°€? Strictí•˜ê²ŒëŠ” ì•„ë‹˜, ê·¸ëŸ¬ë‚˜ ë§ì€ ìš”ì†Œ(Usecase, Layered responsibility)ë¥¼ ê³µìœ í•¨
ë¬´ì—‡ì— ë” ê°€ê¹ë‚˜? í˜„ì‹¤ì ìœ¼ë¡œëŠ” í—¥ì‚¬ê³ ë‚  ê¸°ë°˜ì˜ ì‹¤ìš©ì  í´ë¦° ì•„í‚¤í…ì²˜

ğŸ’¬ í•œ ì¤„ ìš”ì•½
"ë‹¹ì‹ ì´ êµ¬ì¶•í•œ êµ¬ì¡°ëŠ” í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ë˜, í´ë¦° ì•„í‚¤í…ì²˜ì˜ ì¢‹ì€ ì›ì¹™ë“¤ê¹Œì§€ í¡ìˆ˜í•œ í˜„ì‹¤ì ì¸ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ì…ë‹ˆë‹¤."

í•„ìš”í•˜ì‹œë©´ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ë„ ë§Œë“¤ì–´ë“œë¦´ ìˆ˜ ìˆì–´ìš”. ìš”ì²­ë§Œ ì£¼ì„¸ìš”!

[ì¸í„°í˜ì´ìŠ¤ ê³„ì¸µ]

- Templates (T)
- Views (V)
- rest_api/
- interfaces/ui/ (Streamlit)

[ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ]

- services/
- agents/
- chains/

[ë„ë©”ì¸ ê³„ì¸µ]

- Models (M)

[ì¸í”„ë¼ ê³„ì¸µ]

- llms/
- interfaces/api/
- utils/

## API í‚¤ ì„¤ì •

Claude APIë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤:

```
# .env íŒŒì¼ ìƒì„±
echo "ANTHROPIC_API_KEY=your_api_key_here" > .env
```

ë˜ëŠ” ì„œë²„ ì‹¤í–‰ ì‹œ ì§ì ‘ í™˜ê²½ ë³€ìˆ˜ ì§€ì •:

```
ANTHROPIC_API_KEY=your_api_key_here python manage.py runserver
```

## LangGraph ê¸°ëŠ¥ ì‚¬ìš©

íŠ¸ë¦½ë§ˆì¸ë“œëŠ” LangGraphë¥¼ ì´ìš©í•œ ë©€í‹° ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œì„ êµ¬í˜„í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```
POST /api/tripmind/langgraph/
```

ìš”ì²­ í˜•ì‹:

```json
{
  "message": "ì˜¤ì‚¬ì¹´ë¡œ 3ë°• 4ì¼ ì—¬í–‰ì„ ê³„íší•˜ê³  ìˆì–´ìš”"
}
```

ì‘ë‹µ í˜•ì‹:

```json
{
  "result": "...",
  "metadata": {
    "destination": "ì˜¤ì‚¬ì¹´",
    "duration": "3ë°• 4ì¼",
    "travelers": null,
    "budget": null
  }
}
```

ì¼ì •ì´ ìƒì„±ëœ ê²½ìš° ì¶”ê°€ í•„ë“œ í¬í•¨:

```json
{
  "result": "...",
  "metadata": {
    "destination": "ì˜¤ì‚¬ì¹´",
    "duration": "3ë°• 4ì¼",
    "travelers": "4ëª…",
    "budget": "100ë§Œì›"
  },
  "itinerary": "# ì˜¤ì‚¬ì¹´ ì—¬í–‰ ì¼ì • (3ë°• 4ì¼)\n..."
}
```

------------------------------------ã…

ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰ :
python tests/run_tests.py

íŠ¹ì • í…ŒìŠ¤íŠ¸ íŒŒì¼ì‹¤í–‰ :
python -m unittest tests.test_prompt_router_agent

íŠ¹ì • í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‹¤í–‰ :
python -m unittest tests.test_prompt_router_agent.TestPromptRouterAgent.test_process_prompt_itinerary_intent
